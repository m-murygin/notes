# Анализ

  - [Типы анализов](#типы-анализов)
  - [Поверхность атаки](#поверхность-атаки)
  - [DNS / WHOIS / NETWORK](#dns--whois--network)
  - [Search Engines](#search-engines)
  - [Web Content](#web-content)


## Типы анализов
1. `Black box analysis` - когда мы анализируем систему ничего не зная о ней. Т.е. система это некоторый черный ящик, котороый что-то принимает и что-то отдаёт. При анализе у нас некоторая цель и мы используем все доступные средства для её достижения.
    * нулевая информация о цели
    * точка входа
        * домен
        * веб сайт
        * ip адресс
        * имя человека
    * чаще всего используется с целью найти одну уязвимость и проникнуть.
1. `White box analysys` - когда изначально у нас есть широкие знания о системе.
    * Задача ставится как найти все возможные уязвимости системы.

## Поверхность атаки
1. Изначально у нас есть одна точка входа. Для того чтобы повысить шансы успешной компрометации системы мы проводим анализ, с целью **увеличения поверхности атаки**. Т.е. находим смежные домены, адреса и т.д.
1. Методы первоначальной разведки:
    * пассивный анализ - полностью легальны, основанны на открытой информации
        * система доменных имён
        * поисковые системы
        * код клиентской части
        * карта сайта
        * содержимое `robots.txt`
        * социальные сети
    * активный анализ - не совсем легальны, может среагировать служба безопасности.
        * подбор DNS записей
        * подбор файловых путей
        * подбор портов
        * подбор пользователей

## DNS / WHOIS / NETWORK
1. Инструменты анализа
    * `nslookup [-q=ns|mx|axfr|txt|...] {name} {server}`
        * `server` - это `DNS` сервер через который мы хотим произвести запрос
    * `host {name} {server}`
    * dig [@server] {name} [type]
1. Для расширения поверхности атаки можно попробовать найти все домены данной доменной зоны. К примеру, мы хотим атаковать `example.com`, полезно было бы узнать все используемые домены данной зоны, к примеру `www.example.com`, `my.example.com`, etc.
1. Пример поиска поддоменов для учебной зоны _zonetransfer.me`
    * ищем авторитетные днс сервера для искомой зоны
        ```bash
        nslookup -q=ns zonetransfer.me
        ```

    * ищем все поддомены

        ```bash
        dig zonetransfer.me @dnsserver_from_above_response axfr
        ```

1. **`whois IP`** - получает сеть (хостинг провайдера_ к которой принадлежит данный IP адресс. Как результат можно расширить поверхность атаки на всю подсеть
1. **`whoid domain`** - показывает регистрационную информацию хозяина домена.

## Search Engines
1. Два слова без кавычек - ищется вхождение этих двух слов
1. Два слова в кавычках - ищется вхождение выражения в том виде, в котором оно записанно в кавычках
1. Специальные директивы
    * **`inurl`** позволяет задать шаблон url результата ответа
        * `inurl:admin` - выдат одним из результатов `targte.com/admin`
    * **`site`** - позволяет искать в пределах сайта
        * `site:target.com` - результаты будут с сайта `target.com`
    * **`filetype`** - поиск по разрешению файла
        * `filetype: pdf` - выдаст все pdf
    * **`cache`** - вернуть закэшированную копию.
        * `cache: target.com` - закэшированная копия сайта target.com
1. `robots.txt`  - директива для поисковых систем относительно того какие каталоги надо индексировать, а какие нет.
    * некоторые некомпетентные разработчики указывают в `rotobs.txt` какие-либо чувствительные с точки зрения безопасности адреса.

## Web Content
1. В исходниках сайта можно найти много интересной информации.
1. Коментарии разработчиков
1. Версии используемых frameworks
1. Пути и директории на сервере
1. Что-либо закоментированное. Можно получить интересный результат если запустить закоментированный код.
